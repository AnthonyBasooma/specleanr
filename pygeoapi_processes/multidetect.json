{
    "version": "0.2.0",
    "id": "multidetect-and-clean",
    "use_case": "BOKU",
    "title": {
        "en": "Run multidetect and clean the data"
    },
    "description": {
        "en": "This process detects outliers using various methods and cleans the data: Ensemble multiple outlier detection methods to ably compare the outliers flagged by each method; then extract final clean data using either absolute or best method generated outliers. For more details, please ask BOKU."
    },
    "jobControlOptions": ["sync-execute", "async-execute"],
    "keywords": ["pan-european use case", "AquaINFRA", "R"],
    "links": [{
        "type": "text/html",
        "rel": "about",
        "title": "GitHub repo",
        "href": "https://github.com/AnthonyBasooma/specleanr",
        "hreflang": "en-US"
    },
    {
        "type": "text/html",
        "rel": "about",
        "title": "Vignette containing this example",
        "href": "https://github.com/AnthonyBasooma/specleanr/blob/master/vignettes/generaloutlier.Rmd",
        "hreflang": "en-US"
    }],
    "inputs": {
        "input_data": {
            "title": "Input table",
            "description": "URL to the input table containing the data to be cleaned from outliers: Data sets for multiple or single species after of extraction of environment predictors.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["table", "csv"]
        },
        "colname_variable": {
            "title": "Variable of interest",
            "description": "Column name identifying the variable of interest where outliers will be checked from by the univariate outlier detection methods, Z-score, mixed interquantile range, reverse jackknifing etc... In species distribution modeling, the variable of interest to be used should have direct effects to the species such as maximum temperature of the coldest month for bioclimatic variables (IUCN Standards and Petitions Committee, 2022) or stream power index for hydromorphological parameters (Logez et al., 2012).",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["column"]
        },
        "select_columns": {
            "title": "Select columns",
            "description": "In a multivariate dataset, if only particular columns needs to be checked then they should be indicated here. Otherwise all columns will be considerd in outlier detection.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "multiple_species": {
            "title": ": Distinguish between multiple species",
            "description": "If \"false\", then only a single species dataset is expected. However, if multiple species are considered, then the parameter must be set to \"true\". The \"colsp\" is also required to set the column with species names. If the data is a list of indivudual data, then \"colsp\" is not a required parameter.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": []
        },
        "output_type": {
            "title": "Output type",
            "description": "Set whether you want to return ourliers or clean dataset. The Defualt is outlier to return outliers from each method.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "group_colname": {
            "title": ": Required for multiple groups",
            "description": "For multiple groups in a dataframe, provide the column name containing the groups to be checked. For example, a column name with species name in a dataset.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "colname_exclude": {
            "title": "Column name: Exclude",
            "description": "Exclude mainly numerical variables that are not necessary in the analysis, for example x and y columns or latitude/longitude, row numbers or serial IDs. Categorical variables are removed automatically in the data preparation.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": ["column"]
        },
        "methods": {
            "title": "Methods",
            "description": "The name of methods for Outlier detection to be used, as a comma-separated string. Outlier detection methods considered. Use extractMethods (TODO how to link to that) to get outlier detection methods implemented in this package. Example = \"mixediqr, logboxplot, iqr, distboxplot, jknife, semiqr, hampel, iforest, lof, mahal\" (TODO: Any others? Complete set?)",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["column"]
        },
        "silence_true_errors": {
            "title": "True or False",
            "description": "Show execution errors and therefore for multiple species the code will break if one of the methods fails to execute.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": []
        },
        "boot_run": {
            "title": "bool",
            "description": "If set to true, then bootstrapping will be done for small samples.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["column"]
        },
        "boot_maxrecords": {
            "title": "Maximum records",
            "description": "The user can adjust the maximum records were to initiate bootstrapping. Default is 30. So data will N more than 30 will not be bootstrapped.",
            "schema": {
                "type": "number"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": 30,
            "keywords": ["column"]
        },
        "number_of_boots": {
            "title": "Number of bootstraps",
            "description": "The number of bootstraps to generate during bootstrapping. The defualt is 10.",
            "schema": {
                "type": "number"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": 10,
            "keywords": ["column"]
        },
        "setseed": {
            "title": "Set seed",
            "description": "Durring bootstrapping, random samples are generated that requires to set a seed for reproducibility.",
            "schema": {
                "type": "number"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["column"]
        },
        "boot_threshold": {
            "title": "Threshold value to flag a record from bootstrap samples.",
            "description": "As a record is flagged in multiple bootstrap samples, a threshold is required to extract an outlier. Default is 0.6, meaning if a record is flagged 6 of the 10 bootsraps, will be flagged as an outlier.",
            "schema": {
                "type": "decimal"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": 0.6,
            "keywords": ["column"]
        },
        "exceute_pca": {
            "title": "Execute Principal Component Analysis.",
            "description": "If true, then PCA will be intiated.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": []
        },
        "number_of_pca": {
            "title": "Number of PCs to retain.",
            "description": "The user can indicate the maximum number of PCs to retain in the outlier detection. The Defualt is 5.",
            "schema": {
                "type": "number"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": 5,
            "keywords": []
        },
        "pca_silence": {
            "title": "Message during PCA analysis",
            "description": "Messages during PCA analyis are returned if set to false. Default is true to silence the messages like the variance explainedf from the total PCs selected.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "pcavariable": {
            "title": "Select the among retained to be used as variable of interest",
            "description": "The PC1 is the defualt variable selected for outlier detection. Other PC2 can can also be set. PC1 is advisable.",
            "schema": {
                "type": "string"
            },
            "default": "PCA1",
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "sdm_data": {
            "title": "Changes the outlier detection routine",
            "description": "If univariate data then sdm should set to false. All data that requires multivariate analysis such as using kmeans, isolation forest, or Mahalanobis distance, sdm must be set to true. Defualt is true.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "inform_na_outlier": {
            "title": "inform NAs removal",
            "description": "If set to true then NAs removed will be displayed for each group variable. Defualt is FALSE.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "keywords": []
        },
        "missingness": {
            "title": "Missingness",
            "description": "Allowed missing values in a column to allow a user decide whether to remove the individual columns or rows from the data sets. Default 0.1. Therefore, if a column has more than 10 % missing values, then it will be removed from the dataset rather than the rows.",
            "schema": {
                "type": "number"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": 0.1,
            "keywords": []
        },
        "bool_loess ": {
            "title": "Data extraction parameter",
            "description": "If set to true then the local regression method for data extraction will be used. Check Basooma et al., 2025",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": []
        },
        "threshold_clean": {
            "title": "Data extraction parameter: Threshold setting",
            "description": "If bool_loess is not set to true, then a threshold value can be provided. Default is 0.8. The threshold will significantly determine which is flagged as an absolute outlier. Check Basooma et al., 2025",
            "schema": {
                "type": "number"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": 0.8,
            "keywords": []
        },
        "outlierweights_mode": {
            "title": "Data extraction parameter: Oultier weighting",
            "description": "Outlier weighting and selection methods. abs uses record proportional to identify an abolute outlier. Default is abs",
            "schema": {
                "type": "string"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": "abs",
            "keywords": []
        },
        "classifymode": {
            "title": "Cuts data into classess",
            "description": "Categorize data base on the correlation coefficient manner based on Akoglu 2018",
            "schema": {
                "type": "number"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": "med",
            "keywords": []
        },
        "eif_bool": {
            "title": "Emprical Influence Function",
            "description": "Computes the Emprical Influence Fucntion for classified outlier. Defualt is FALSE",
            "schema": {
                "type": "logcial"
            },
            "minOccurs": 0,
            "maxOccurs": 1,
            "default": false,
            "keywords": ["column"]
        },
        "classify_or_autoremove": {
            "title": "Either use outlier classification or autoremoval with threshold and LOESS method",
            "description": "The parameter allows to switch from outlification that labels all records as perfect outlier to fair outliers to allows further scrutiny. Otherwise, the outliers will be dropped based on a threshold set naively or using LOESS method.",
            "schema": {
                "type": "boolean"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": []
        }
    },
    "outputs": {
        "cleaned_data": {
            "title": "Cleaned data",
            "description": "A table with data extracted from the reference dataset set during outlier detection.",
            "schema": {
                "type": "object",
                "contentMediaType": "application/json"
            }
        }
    },
    "example": {
        "inputs": {
            "input_data": "https://example.com/multiprecleaned.csv",
            "colname_variable": "Sepal.Length",
            "select_columns": null,
            "multiple_species": true,
            "output_type": "outlier",
            "group_colname": "Species",
            "colname_exclude": null,
            "methods": "mixediqr, logboxplot, iqr, distboxplot, jknife, semiqr, hampel",
            "silence_true_errors": false,
            "boot_run": false,
            "boot_maxrecords": 30,
            "number_of_boots": 5,
            "setseed": 1125,
            "boot_threshold": 0.6,
            "exceute_pca": true,
            "number_of_pca": 2,
            "pca_silence": true,
            "pcavariable": "PC1",
            "sdm_data": true,
            "inform_na_outlier": true,
            "missingness": 1.0,
            "bool_loess": true,
            "threshold_clean": null,
            "outlierweights_mode": "abs",
            "classifymode": "med",
            "eif_bool": false,
            "classify_or_autoremove": true
        }
    }
}
