<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ensemble multiple outlier detection methods. — multidetect • specleanr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Ensemble multiple outlier detection methods. — multidetect"><meta name="description" content="The function allows to ensemble multiple outlier detection methods to ably compare the outliers flagged
by each method."><meta property="og:description" content="The function allows to ensemble multiple outlier detection methods to ably compare the outliers flagged
by each method."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">specleanr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/addspeciesecologicalranges.html">Flag outliers based on species ecological ranges.</a></li>
    <li><a class="dropdown-item" href="../articles/eOutlier.html">Environmental outlier detection with bootstrapping and principal component analysis.</a></li>
    <li><a class="dropdown-item" href="../articles/generaloutlier.html">General outlier detection for univariate datasets</a></li>
    <li><a class="dropdown-item" href="../articles/loessmethodoptimisation.html">Optimising the LOESS method used for automatic identification of the outlier thresholds.</a></li>
    <li><a class="dropdown-item" href="../articles/Plants.html">Detecting environmental outliers in species distribution models for plants.</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AnthonyBasooma/specleanr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Ensemble multiple outlier detection methods.</h1>
      <small class="dont-index">Source: <a href="https://github.com/AnthonyBasooma/specleanr/blob/master/R/multidetect.R" class="external-link"><code>R/multidetect.R</code></a></small>
      <div class="d-none name"><code>multidetect.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function allows to ensemble multiple outlier detection methods to ably compare the outliers flagged
by each method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">multidetect</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">var</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"outlier"</span>,</span>
<span>  exclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">multiple</span>,</span>
<span>  var_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  optpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>optdf <span class="op">=</span> <span class="cn">NULL</span>, ecoparam <span class="op">=</span> <span class="cn">NULL</span>, optspcol <span class="op">=</span> <span class="cn">NULL</span>, direction <span class="op">=</span> <span class="cn">NULL</span>, maxcol</span>
<span>    <span class="op">=</span> <span class="cn">NULL</span>, mincol <span class="op">=</span> <span class="cn">NULL</span>, maxval <span class="op">=</span> <span class="cn">NULL</span>, minval <span class="op">=</span> <span class="cn">NULL</span>, checkfishbase <span class="op">=</span> <span class="cn">FALSE</span>, mode <span class="op">=</span></span>
<span>    <span class="cn">NULL</span>, lat <span class="op">=</span> <span class="cn">NULL</span>, lon <span class="op">=</span> <span class="cn">NULL</span>, pct <span class="op">=</span> <span class="fl">80</span>, warn <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  kmpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">6</span>, method <span class="op">=</span> <span class="st">"silhouette"</span>, mode <span class="op">=</span> <span class="st">"soft"</span><span class="op">)</span>,</span>
<span>  ifpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cutoff <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span>,</span>
<span>  mahalpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"soft"</span><span class="op">)</span>,</span>
<span>  jkpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"soft"</span><span class="op">)</span>,</span>
<span>  zpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"mild"</span>, mode <span class="op">=</span> <span class="st">"soft"</span><span class="op">)</span>,</span>
<span>  gloshpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">3</span>, metric <span class="op">=</span> <span class="st">"manhattan"</span>, mode <span class="op">=</span> <span class="st">"soft"</span><span class="op">)</span>,</span>
<span>  knnpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"manhattan"</span>, mode <span class="op">=</span> <span class="st">"soft"</span><span class="op">)</span>,</span>
<span>  lofpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"manhattan"</span>, mode <span class="op">=</span> <span class="st">"soft"</span>, minPts <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>  <span class="va">methods</span>,</span>
<span>  bootSettings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>run <span class="op">=</span> <span class="cn">FALSE</span>, nb <span class="op">=</span> <span class="fl">5</span>, maxrecords <span class="op">=</span> <span class="fl">30</span>, seed <span class="op">=</span> <span class="fl">1135</span>, th <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span>,</span>
<span>  pc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>exec <span class="op">=</span> <span class="cn">FALSE</span>, npc <span class="op">=</span> <span class="fl">2</span>, q <span class="op">=</span> <span class="cn">T</span>, pcvar <span class="op">=</span> <span class="st">"PC1"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  spname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  warn <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  missingness <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  silence_true_errors <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sdm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na.inform <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>dataframe or list</code>. Data sets for multiple or single species after of extraction of environment predictors.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p><code>character</code>. A variable to check for outliers especially the one with directly affects species distribution such as
maximum temperature of the coldest month for bioclimatic variables <code>(IUCN Standards and Petitions Committee, 2022))</code> or
stream power index for hydromorphological parameters <code>(Logez et al., 2012)</code>. This parameter is
necessary for the univariate outlier detection methods such as Z-score.</p></dd>


<dt id="arg-select">select<a class="anchor" aria-label="anchor" href="#arg-select"></a></dt>
<dd><p><code>vector</code> The columns that will be used in outlier detection. Make sure only numeric columns are accepted.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p><code>character</code>. Either <code>clean</code>: for a data set with no outliers, or <code>outlier</code>: to output a dataframe with outliers. Default <code>outlier</code>.</p></dd>


<dt id="arg-exclude">exclude<a class="anchor" aria-label="anchor" href="#arg-exclude"></a></dt>
<dd><p><code>vector</code>. Exclude variables that should not be considered in the fitting the one class model, for example <code>x</code> and <code>y</code> columns or
latitude/longitude or any column that the user doesn't want to consider.</p></dd>


<dt id="arg-multiple">multiple<a class="anchor" aria-label="anchor" href="#arg-multiple"></a></dt>
<dd><p><code>logical</code>. If the multiple species are considered, then multiple must be set to <code>TRUE</code> and <code>FALSE</code> for single species.</p></dd>


<dt id="arg-var-col">var_col<a class="anchor" aria-label="anchor" href="#arg-var-col"></a></dt>
<dd><p><code>string</code>. A column with species names if <code>dataset</code> for species is a dataframe not a list. See <code><a href="pred_extract.html">pred_extract</a></code> for extracting environmental data.</p></dd>


<dt id="arg-optpar">optpar<a class="anchor" aria-label="anchor" href="#arg-optpar"></a></dt>
<dd><p><code>list</code>. Parameters for species optimal ranges like temperatures ranges. For details check <code><a href="ecological_ranges.html">ecological_ranges</a></code>.</p></dd>


<dt id="arg-kmpar">kmpar<a class="anchor" aria-label="anchor" href="#arg-kmpar"></a></dt>
<dd><p><code>list</code>. Parameters for k-means clustering like method and number of clusters for tuning. For details, check <code><a href="xkmeans.html">xkmeans</a></code>.</p></dd>


<dt id="arg-ifpar">ifpar<a class="anchor" aria-label="anchor" href="#arg-ifpar"></a></dt>
<dd><p><code>list</code>. Isolation forest parameter settings. Parameters of the isolation model that are required include
the <strong>cutoff</strong> to be used for denoting outliers. It ranges from <code>0 to 1</code> but Default <code>0.5</code>. Also,
the <strong>size</strong> of data partitioning for training should be determined. For more details check <code>(Liu et al. 2008)</code></p></dd>


<dt id="arg-mahalpar">mahalpar<a class="anchor" aria-label="anchor" href="#arg-mahalpar"></a></dt>
<dd><p><code>list</code>. Parameters for Malahanobis distance which includes varying the mode of output  <code><a href="mahal.html">mahal</a></code>.</p></dd>


<dt id="arg-jkpar">jkpar<a class="anchor" aria-label="anchor" href="#arg-jkpar"></a></dt>
<dd><p><code>list</code>. Parameters for reverse jackknifing mainly the mode used. For details <code><a href="jknife.html">jknife</a></code>.</p></dd>


<dt id="arg-zpar">zpar<a class="anchor" aria-label="anchor" href="#arg-zpar"></a></dt>
<dd><p><code>list</code>. Parameters for z-score such as <code>mode</code> and <code>x</code> parameter. For details <code><a href="zscore.html">zscore</a></code></p></dd>


<dt id="arg-gloshpar">gloshpar<a class="anchor" aria-label="anchor" href="#arg-gloshpar"></a></dt>
<dd><p><code>list</code>. Parameters for global local outlier score from hierarchies such as distance metric used. For details <code><a href="xglosh.html">xglosh</a></code>.</p></dd>


<dt id="arg-knnpar">knnpar<a class="anchor" aria-label="anchor" href="#arg-knnpar"></a></dt>
<dd><p><code>list</code>. Parameters for varying the distance matrix such as <code>Euclidean</code> or <code>Manhattan distance</code>. For details <code><a href="xknn.html">xknn</a></code></p></dd>


<dt id="arg-lofpar">lofpar<a class="anchor" aria-label="anchor" href="#arg-lofpar"></a></dt>
<dd><p><code>list</code>. Parameters for local outlier factor such as the distance matrix and mode of method implementation
such as robust and soft mode. For details <code><a href="xlof.html">xlof</a></code>.</p></dd>


<dt id="arg-methods">methods<a class="anchor" aria-label="anchor" href="#arg-methods"></a></dt>
<dd><p><code>vector</code>. Outlier detection methods considered. Use <code><a href="extractMethods.html">extractMethods</a></code> to get outlier detection methods implemented in this package.</p></dd>


<dt id="arg-bootsettings">bootSettings<a class="anchor" aria-label="anchor" href="#arg-bootsettings"></a></dt>
<dd><p><code>list</code>. A list of parameters to implement bootstrapping mostly for records below 30.
For details checks <code><a href="boots.html">boots</a></code>.</p></dd>


<dt id="arg-pc">pc<a class="anchor" aria-label="anchor" href="#arg-pc"></a></dt>
<dd><p><code>list</code>. A list of parameters to implement principal component analysis for dimesnion reduction.
For details checks <code><a href="pca.html">pca</a></code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>logical</code>. whether to return messages or not. Default <code>FALSE</code>.</p></dd>


<dt id="arg-spname">spname<a class="anchor" aria-label="anchor" href="#arg-spname"></a></dt>
<dd><p><code>string</code>. species name being handled.</p></dd>


<dt id="arg-warn">warn<a class="anchor" aria-label="anchor" href="#arg-warn"></a></dt>
<dd><p><code>logical</code>. Whether to return warning or not. Default <code>TRUE</code>.</p></dd>


<dt id="arg-missingness">missingness<a class="anchor" aria-label="anchor" href="#arg-missingness"></a></dt>
<dd><p><code>numeric</code>. Allowed missing values in a column to allow a user decide whether to remove the individual
columns or rows from the data sets. Default 0.1. Therefore,
     if a column has more than 10% missing values, then it will be removed from the dataset rather than the rows.</p></dd>


<dt id="arg-silence-true-errors">silence_true_errors<a class="anchor" aria-label="anchor" href="#arg-silence-true-errors"></a></dt>
<dd><p><code>logical</code>. Show execution errors and therefore for multiple species the code will break if one of the
methods fails to execute.</p></dd>


<dt id="arg-sdm">sdm<a class="anchor" aria-label="anchor" href="#arg-sdm"></a></dt>
<dd><p>logical If the user sets <code>TRUE</code>, strict data checks will be done including removing all non-numeric
columns from the datasets before identification of outliers. If set to <code>FALSE</code> non numeric columns will be left
in the data but the variable of concern will checked if its numeric. Also, only univariate methods are allowed. Check
<code><a href="broad_classify.html">broad_classify</a></code> for the broad categories of the methods allowed.</p></dd>


<dt id="arg-na-inform">na.inform<a class="anchor" aria-label="anchor" href="#arg-na-inform"></a></dt>
<dd><p><code>logical</code> Inform on the NAs removed in executing general datasets. Default <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>list</code> of outliers or clean dataset of <code>datacleaner</code> class. The different attributes are
associated with the <code>datacleaner</code> class from <code>multidetect</code> function.</p>
<ul><li><p><code>result</code>: <code>dataframe</code>. list of dataframes with the outliers flagged by each method.</p></li>
<li><p><code>mode</code>: <code>logical</code>. Indicating whether it was multiple TRUE or FALSE.</p></li>
<li><p><code>varused</code>: <code>character</code>. Indicating the variable used for the univariate outlier detection methods.</p></li>
<li><p><code>out</code>: <code>character</code>. Whether outliers where indicated by the user or no outlier data.</p></li>
<li><p><code>methodsused</code>: <code>vector</code>. The different methods used the outlier detection process.</p></li>
<li><p><code>dfname</code>: <code>character</code>. The dataset name for the species records.</p></li>
<li><p><code>exclude</code>: <code>vector</code>. The columns which were excluded during outlier detection, if any.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function computes different outlier detection methods including univariate, multivariate and species
     ecological ranges to enables seamless comparison and similarities in the outliers detected by each
     method. This can be done for multiple species or a single species in a dataframe or lists or dataframes
     and thereafter the outliers can be extracted using the <code><a href="extract_clean_data.html">extract_clean_data</a></code> function.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ol><li><p>IUCN Standards and Petitions Committee. (2022). THE IUCN RED LIST OF THREATENED SPECIESTM Guidelines for Using the IUCN Red List
Categories and Criteria Prepared by the Standards and Petitions Committee of the IUCN Species Survival Commission.
https://www.iucnredlist.org/documents/RedListGuidelines.pdf.</p></li>
<li><p>Liu, F. T., Ting, K. M., &amp; Zhou, Z. H. (2008, December). Isolation forest.
In 2008 eighth ieee international conference on data mining (pp. 413-422). IEEE.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"efidata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"jdsdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">matchdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="match_datasets.html">match_datasets</a></span><span class="op">(</span>datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>jds <span class="op">=</span> <span class="va">jdsdata</span>, efi<span class="op">=</span><span class="va">efidata</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            lats <span class="op">=</span> <span class="st">'lat'</span>,</span></span>
<span class="r-in"><span>                            lons <span class="op">=</span> <span class="st">'lon'</span>,</span></span>
<span class="r-in"><span>                            species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'speciesname'</span>,<span class="st">'scientificName'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Date'</span>, <span class="st">'sampling_date'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'JDS4_site_ID'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">datacheck</span> <span class="op">&lt;-</span> <span class="fu"><a href="check_names.html">check_names</a></span><span class="op">(</span><span class="va">matchdata</span>, colsp <span class="op">=</span> <span class="st">'species'</span>, pct <span class="op">=</span> <span class="fl">90</span>, merge <span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">danube</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/danube.shp.zip'</span>, package<span class="op">=</span><span class="st">'specleanr'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="va">danube</span>, quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">worldclim</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/worldclim.tiff'</span>, package<span class="op">=</span><span class="st">'specleanr'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="pred_extract.html">pred_extract</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datacheck</span>,</span></span>
<span class="r-in"><span>                     raster<span class="op">=</span> <span class="va">worldclim</span> ,</span></span>
<span class="r-in"><span>                     lat <span class="op">=</span> <span class="st">'decimalLatitude'</span>,</span></span>
<span class="r-in"><span>                     lon<span class="op">=</span> <span class="st">'decimalLongitude'</span>,</span></span>
<span class="r-in"><span>                     colsp <span class="op">=</span> <span class="st">'speciescheck'</span>,</span></span>
<span class="r-in"><span>                     bbox <span class="op">=</span> <span class="va">db</span>,</span></span>
<span class="r-in"><span>                     minpts <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                     list<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     merge<span class="op">=</span><span class="cn">F</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out_df</span> <span class="op">&lt;-</span> <span class="fu">multidetect</span><span class="op">(</span>data <span class="op">=</span> <span class="va">rdata</span>, multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     var <span class="op">=</span> <span class="st">'bio6'</span>,</span></span>
<span class="r-in"><span>                     output <span class="op">=</span> <span class="st">'outlier'</span>,</span></span>
<span class="r-in"><span>                     exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'x'</span>,<span class="st">'y'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'zscore'</span>, <span class="st">'adjbox'</span>,<span class="st">'iqr'</span>, <span class="st">'semiqr'</span>,<span class="st">'hampel'</span>, <span class="st">'kmeans'</span>,</span></span>
<span class="r-in"><span>                                <span class="st">'logboxplot'</span>, <span class="st">'lof'</span>,<span class="st">'iforest'</span>, <span class="st">'mahal'</span>, <span class="st">'seqfences'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#optimal ranges in the multidetect: made up</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">optdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Salmo trutta"</span>, <span class="st">"Abramis brama"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      mintemp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1.6</span><span class="op">)</span>,maxtemp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">21</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       meantemp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8.5</span>, <span class="fl">10.4</span><span class="op">)</span>, <span class="co">#ecoparam</span></span></span>
<span class="r-in"><span>                      direction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'greater'</span>, <span class="st">'greater'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#species record</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">salmoabramis</span> <span class="op">&lt;-</span> <span class="va">rdata</span><span class="op">[</span><span class="st">"Salmo trutta"</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#even if one species, please indicate multiple to TRUE, since its picked from pred_extract function</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out_df</span> <span class="op">&lt;-</span> <span class="fu">multidetect</span><span class="op">(</span>data <span class="op">=</span> <span class="va">salmoabramis</span>, multiple <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                      var <span class="op">=</span> <span class="st">'bio1'</span>,</span></span>
<span class="r-in"><span>                      output <span class="op">=</span> <span class="st">'outlier'</span>,</span></span>
<span class="r-in"><span>                      exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'x'</span>,<span class="st">'y'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'zscore'</span>, <span class="st">'adjbox'</span>,<span class="st">'iqr'</span>, <span class="st">'semiqr'</span>,<span class="st">'hampel'</span>, <span class="st">'kmeans'</span>,</span></span>
<span class="r-in"><span>                                  <span class="st">'logboxplot'</span>, <span class="st">'lof'</span>,<span class="st">'iforest'</span>, <span class="st">'mahal'</span>, <span class="st">'seqfences'</span>, <span class="st">'optimal'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      optpar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>optdf<span class="op">=</span><span class="va">optdata</span>, optspcol <span class="op">=</span> <span class="st">'species'</span>,</span></span>
<span class="r-in"><span>                                    mincol <span class="op">=</span> <span class="st">"mintemp"</span>, maxcol <span class="op">=</span> <span class="st">"maxtemp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#plot the number of outliers</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#ggoutliers(out_df, 1)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anthony Basooma, Thomas Hein, Astrid Schmidt-Kloiber, Florian Borgwardt.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

